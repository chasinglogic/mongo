# Includes the jstests in distribution tarballs generated by SCons

from os import path

Import("env")
Import("get_option")

if get_option("install-mode") == "hygienic":
    env = env.Clone()

    for jstest in env.Glob("**/*.js"):
        env.AutoInstall(
            target=path.join(
                "$PREFIX_SHARE_DIR",
                "jstests",
                str(jstest.dir),
            ),
            source=jstest,
            AIB_COMPONENT="jstests",
            AIB_ROLE="runtime",
            AIB_COMPONENTS_EXTRA=[
                "tests",
            ],
        )
